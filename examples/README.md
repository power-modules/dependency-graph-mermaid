# Mermaid Renderer Examples

This directory contains example Mermaid outputs generated by the renderers in this repository. They showcase three diagram types: flowchart (graph), class diagram, and timeline.

## Generated files

### E‑commerce application

- Flowchart (graph):
  - `ecommerce_full.mmd` — modules with exports and labeled edges
  - `ecommerce_clean.mmd` — no exports; concise labels (max 30 chars)
  - `ecommerce_minimal.mmd` — module names + connections only

- Class diagram:
  - `ecommerce_class_full.mmd`
  - `ecommerce_class_clean.mmd`
  - `ecommerce_class_minimal.mmd`

- Timeline:
  - `ecommerce_timeline.mmd` — phases by dependency layers with sections: Infrastructure and Domain

These files are produced by `examples/ecommerce/generate.php` using:
- `Mermaid\MermaidGraph` (flowchart)
- `Mermaid\MermaidClassDiagram` (classDiagram)
- `Mermaid\MermaidTimeline` (timeline with Infrastructure/Domain sections)

### Microservices architecture

- `microservices.mmd` — flowchart
- `microservices_class.mmd` — classDiagram

These are produced by `examples/microservices/generate_microservices.php` from a small synthetic dependency graph (no framework bootstrap required).

## Visual details

- Flowchart:
  - Per‑node class assignments for «independent» and «unused»
  - Single classDef block at the end of the file
  - Optional service label truncation via renderer’s `maxServiceLength`

- Class diagram:
  - YAML frontmatter enables `hideEmptyMembersBox`
  - Stereotypes: `<<independent>>`, `<<unused>>` outside class blocks
  - Per‑node `class X:::style` assignments; `classDef` lines at the end
  - Direction `TB`

- Timeline:
  - Phases computed by dependency layering (Kahn‑style)
  - Sections: Infrastructure and Domain (via a simple `ModuleClassifier`)
  - Shows export/import counts per module

## View the diagrams

1) Mermaid Live Editor (recommended): https://mermaid.live/ — paste any `.mmd`

2) VS Code: install a Mermaid preview extension and open the file

3) Git platforms: some platforms render `.mermaid` files automatically

## Regenerating examples

Use the Make target to generate and validate examples:

```bash
make diagrams
```

Or run the scripts directly:

```bash
php examples/ecommerce/generate.php
php examples/microservices/generate_microservices.php
```

## CI

The GitHub Actions workflow runs `make ci`, which includes code style, static analysis, tests, and `make diagrams` verification.

## Use cases

- Modular monoliths — module boundaries and dependencies
- Microservices — service‑to‑service communication patterns
- Plugin architectures — components and relations
- DDD — bounded context dependencies

Copy an example into Mermaid Live to explore the visualization.